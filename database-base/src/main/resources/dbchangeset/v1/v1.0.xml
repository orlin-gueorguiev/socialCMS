<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd" logicalFilePath="v1/v1.0">


	<changeSet id="v1_130911_generate_Country" author="orlin" context="setup">

		<createTable tableName="Country">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" primaryKeyName="PK_COUNTRY_ID" />
			</column>

			<column name="nameInDefaultLanguage" type="varchar(255)">
				<constraints nullable="false" />
			</column>

			<column name="zipCodePrefix" type="varchar(255)" />

			<column name="isoCountryCode" type="varchar(255)">
				<constraints nullable="false" unique="true" uniqueConstraintName="UC_COUNTRY_ISO" />
			</column>

			<column name="created" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>

			<column name="lastModified" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="v1_130911_generate_Address" author="orlin" context="setup">
		<createTable tableName="Address">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" primaryKeyName="PK_ADDRESS_ID" />
			</column>

			<column name="countryId" type="int">
				<constraints nullable="false" />
			</column>

			<column name="zipCode" type="int">
				<constraints nullable="false" />
			</column>

			<column name="street" type="varchar(255)">
				<constraints nullable="false" />
			</column>

			<column name="created" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>

			<column name="lastModified" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_ADDRESS_COUNTRYID" referencedTableName="Country" baseColumnNames="countryId"
			baseTableName="Address" referencedColumnNames="id" />
	</changeSet>

	<changeSet id="v1_130911_generate_WebPresence" author="orlin" context="setup">
		<createTable tableName="WebPresence">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" primaryKeyName="PK_WEBPRESENCE_ID" />
			</column>

			<column name="email" type="varchar(255)" />

			<column name="webpage" type="varchar(511)" />

			<column name="created" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>

			<column name="lastModified" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="v1_130911_generate_Company" author="orlin" context="setup">
		<createTable tableName="Company">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" primaryKeyName="PK_COMPANY_ID" />
			</column>

			<column name="name" type="varchar(255)">
				<constraints nullable="false" />
			</column>

			<column name="webpresenceId" type="int" />

			<column name="addressId" type="int" />

			<column name="created" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>

			<column name="lastModified" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_COMPANY_WEBPRESENCEID" referencedTableName="WebPresence" baseColumnNames="webpresenceId"
			baseTableName="Company" referencedColumnNames="id" />

		<addForeignKeyConstraint constraintName="FK_COMPANY_ADDRESSID" referencedTableName="Address" baseColumnNames="addressId"
			baseTableName="Company" referencedColumnNames="id" />
	</changeSet>


	<changeSet id="v1_130911_generate_Person" author="orlin" context="setup">
		<createTable tableName="Person">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" primaryKeyName="PK_PERSON_ID" />
			</column>

			<column name="firstName" type="varchar(255)" />

			<column name="lastName" type="varchar(255)" />

			<column name="webpresenceId" type="int" />

			<column name="addressId" type="int" />

			<column name="companyId" type="int" />

			<column name="created" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>

			<column name="lastModified" type="datetime" defaultValueComputed="${now}">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="FK_PERSON_WEBPRESENCEID" referencedTableName="WebPresence" baseColumnNames="webpresenceId"
			baseTableName="Person" referencedColumnNames="id" />

		<addForeignKeyConstraint constraintName="FK_PERSON_ADDRESSID" referencedTableName="Address" baseColumnNames="addressId" baseTableName="Person"
			referencedColumnNames="id" />

		<addForeignKeyConstraint constraintName="FK_PERSON_COMPANYID" referencedTableName="Company" baseColumnNames="companyId" baseTableName="Person"
			referencedColumnNames="id" />

	</changeSet>

</databaseChangeLog>	